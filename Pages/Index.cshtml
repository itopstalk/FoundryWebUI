@page
@model IndexModel
@{
    ViewData["Title"] = "Chat";
}

<div class="row g-0" style="height: calc(100vh - 70px);">
    <!-- Chat Area -->
    <div class="col d-flex flex-column">
        <!-- Model Selector -->
        <div class="p-3 border-bottom d-flex align-items-center gap-3">
            <label class="form-label mb-0 fw-bold">Model:</label>
            <select id="model-select" class="form-select form-select-sm" style="max-width: 350px;">
                <option value="">Loading models...</option>
            </select>
            <span id="model-provider" class="badge bg-secondary"></span>
            <button id="btn-new-chat" class="btn btn-sm btn-outline-light ms-auto">🗑️ New Chat</button>
        </div>

        <!-- Messages -->
        <div id="chat-messages" class="flex-grow-1 overflow-auto p-3">
            <div class="text-center text-muted mt-5">
                <h4>Welcome to FoundryWebUI</h4>
                <p>Select a model and start chatting</p>
            </div>
        </div>

        <!-- Input Area -->
        <div class="p-3 border-top">
            <div class="input-group">
                <textarea id="chat-input" class="form-control" rows="2" placeholder="Type your message... (Shift+Enter for new line)"
                          style="resize: none;"></textarea>
                <button id="btn-send" class="btn btn-primary" disabled>
                    <span id="send-text">Send</span>
                    <span id="send-spinner" class="spinner-border spinner-border-sm d-none"></span>
                </button>
                <button id="btn-stop" class="btn btn-danger d-none">Stop</button>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script src="~/js/chat.js" asp-append-version="true"></script>
}
